# Demo/Test command line source generator
This project demonstrates use of the command line source generator AND also tests the final
NuGet Packaging. It lists the command line library package. This package should also bring
in the analyzer and generator.

>[!IMPORTANT]
> To test/leverage the final package it MUST be built already AND can only reference the
> dependent packages that also exist. (Including the correct versions). This is normally not
> plausible from an IDE build. The version number for such builds is based on the timestamp
> of the build and is determined for each project independently. However, the command line
> will build ALL of the projects with the same version number.
> `Build-Source.ps1 -FullInit -ForceClean` will ensure the same version is built into all of
> the packages. It will then build this project. This breaks the dependency cycles and
> eliminates the problem of expressing the dependency on a set of generated packages but NOT
> the projects that create them. (Sadly, this turns out to be a more complex problem than
> one would think)

To support the dependency and testing this is NOT part of the same solution as the other
components. Within this repository, it does depend on those being built first.

## Purpose
Aside from serving as a general demo for use in documentation etc... this project serves to
validate the proper packaging of the generator with the library it is generating source for.
The formal tests will validate the behavior of the generator/analyzer itself but don't use
NuGet packaging (They use project references). The meta package that includes a reference to
both the library and the generator is built independent of those assemblies. This is done to
break the dependency problem where the meta package references but does not need them to
build. Thus, this package validates the NuGet Packaging is functioning as intended. It will
fail to build if there is a problem. So it is built after all the other projects as part of
the `Build-Source.ps1` script. As long as it builds without error it worked for what is
tested. (The formal tests validate the behavior more directly)

## Differences from Real world use
The only thing that is different from this demo and real world use is the `VersionOverride`
attribute on the `PackageReference` for `Ubiquity.NET.CommandLine`. This is simply present
for the use in this repo as the [Nuget.Config](../../NuGet.Config) uses source mapping to
constrain resolving packages generated by this rep to this repo. This constrains NuGet to
resolve these dependencies to what was built in this repository only. This ensures that what
is consumed and tested is what is built. This is a necessity of building or testing this
repository. This specific demo project, only has the `VersionOverride` to fit into the repo
build and verify the package built before accepting/releasing it.
