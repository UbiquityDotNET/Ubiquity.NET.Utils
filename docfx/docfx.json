// NOTE: docfx does NOT support multi-targeting
// It can generate docs for ONLY one version of the library
// docfx merge was supposed to resolve that, but is broken (https://github.com/dotnet/docfx/issues/2289).
// Sadly, that's been open since 2017 (8 years now...) so not likely to ever be resolved.
// Use of this tool is likely abandoned and an alternative should be sought.
{
    "$schema": "https://raw.githubusercontent.com/dotnet/docfx/main/schemas/docfx.schema.json",
    "metadata": [
        // [Sigh] - docfx tooling doesn't support .NET 10 SDK. So, build docs from binaries.
        // This requires a synchronous build as building the docs now requires the built binaries.
        // Additionally, this requires a release build of the binaries as there is no way to specify
        // the configuration to docx metadata.
        //
        // Also due to a bug in reference processing in docfx (https://github.com/dotnet/docfx/issues/10423)
        // this will generate warnings that can be ignored:
        // warning: InvalidAssemblyReference: Unable to resolve assembly reference Microsoft.CodeAnalysis, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
        // warning: InvalidAssemblyReference: Unable to resolve assembly reference Microsoft.CodeAnalysis.CSharp, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
        // warning: InvalidAssemblyReference: Unable to resolve assembly reference Microsoft.CodeAnalysis.VisualBasic, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
        // warning: InvalidAssemblyReference: Unable to resolve assembly reference Microsoft.Bcl.HashCode, Version=6.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51
        // warning: InvalidAssemblyReference: Unable to resolve assembly reference SQLitePCLRaw.core, Version=2.1.0.1603, Culture=neutral, PublicKeyToken=1488e028ca7ab535
        // warning: InvalidAssemblyReference: Unable to resolve assembly reference SQLitePCLRaw.batteries_v2, Version=2.1.0.1603, Culture=neutral, PublicKeyToken=8226ea5df37bcae9
        //
        // Each project is listed in the order they appear in the VS solution explorer so they are easier
        // to find and check etc...
        {
            // ANTLR Utilities library
            "memberLayout": "separatePages",
            "namespaceLayout": "nested",
            "src": [
                {
                    "src": "../BuildOutput/bin/Ubiquity.NET.ANTLR.Utils/Release/net8.0",
                    "files": [ "Ubiquity.NET.ANTLR.Utils.dll" ]
                }
            ],
            "dest": "antlr-utils/api"
        },
        {
            // CodeAnalysis Utilities library
            "memberLayout": "separatePages",
            "namespaceLayout": "nested",
            "src": [
                {
                    "src": "../BuildOutput/bin/Ubiquity.NET.CodeAnalysis.Utils/Release/netstandard2.0",
                    "files": [ "Ubiquity.NET.CodeAnalysis.Utils.dll" ]
                }
            ],
            "dest": "CodeAnalysis/api"
        },
        {
            // Command line Utilities library
            "memberLayout": "separatePages",
            "namespaceLayout": "nested",
            "src": [
                {
                    "src": "../BuildOutput/bin/Ubiquity.NET.CommandLine/Release/net10.0",
                    "files": [ "Ubiquity.NET.CommandLine.dll" ]
                }
            ],
            "dest": "CommandLine/api"
        },
        {
            // Extensions library
            "memberLayout": "separatePages",
            "namespaceLayout": "nested",
            "src": [
                {
                    "src": "../BuildOutput/bin/Ubiquity.NET.Extensions/Release/net8.0",
                    "files": [ "Ubiquity.NET.Extensions.dll" ]
                }
            ],
            "dest": "extensions/api",
        },
        {
            // Interop helpers library
            "memberLayout": "separatePages",
            "namespaceLayout": "nested",
            "src": [
                {
                    "src": "../BuildOutput/bin/Ubiquity.NET.InteropHelpers/Release/net8.0",
                    "files": [ "Ubiquity.NET.InteropHelpers.dll" ]
                }
            ],
            "dest": "interop-helpers/api"
        },
        {
            // Runtime utilities library
            "memberLayout": "separatePages",
            "namespaceLayout": "nested",
            "src": [
                {
                    "src": "../BuildOutput/bin/Ubiquity.NET.Runtime.Utils/Release/net8.0",
                    "files": [ "Ubiquity.NET.Runtime.Utils.dll" ]
                }
            ],
            "dest": "runtime-utils/api",
        },
        {
            // Runtime utilities library
            "memberLayout": "separatePages",
            "namespaceLayout": "nested",
            "src": [
                {
                    "src": "../BuildOutput/bin/Ubiquity.NET.SourceGenerator.Test.Utils/Release/net10.0",
                    "files": [ "Ubiquity.NET.SourceGenerator.Test.Utils.dll" ]
                }
            ],
            "dest": "src-gen-test-utils/api",
        },
        {
            // SrcGeneration library
            "memberLayout": "separatePages",
            "namespaceLayout": "nested",
            "src": [
                {
                    "src": "../BuildOutput/bin/Ubiquity.NET.SrcGeneration/Release/net8.0",
                    "files": [ "Ubiquity.NET.SrcGeneration.dll" ]
                }
            ],
            "dest": "SrcGeneration/api",
        }
    ],
    "build": {
        // xref YAML files that contain mappings from an XREF ID to the actual URL for the content in an external source
        "xref": [
            "https://learn.microsoft.com/en-us/dotnet/.xrefmap.json"
        ],
        // NOTE: Unless overridden by a "src" key, All File paths are relative to the location of this docfx.json file
        "content": [
            {
                // Root of the site; only uses the index and TOC explicitly named (NO GLOBS to confuse things!)
                "files": [
                    "index.md",
                    "toc.yml"
                ]
            },
            {
                // ANTLR Utils project additional content, Includes the generated metadata API folder
                "files": [
                    "antlr-utils/**.{md,yml}"
                ],
                // Exclude the namespace overwrites and XREF maps as they are listed explicitly elsewhere
                "exclude": [
                    "**/namespaces/**.md",
                    "**/*-xref.yml"
                ]
            },
            {
                // CodeAnalysis.Utils project additional content, Includes the generated metadata API folder
                "files": [
                    "CodeAnalysis/**.{md,yml}"
                ],
                // Exclude the namespace overwrites and XREF maps as they are listed explicitly elsewhere
                "exclude": [
                    "**/namespaces/**.md",
                    "**/*-xref.yml"
                ]
            },
            {
                // CommandLine Utils project additional content, Includes the generated metadata API folder
                "files": [
                    "CommandLine/**.{md,yml}"
                ],
                // Exclude the namespace overwrites and XREF maps as they are listed explicitly elsewhere
                "exclude": [
                    "**/namespaces/**.md",
                    "**/*-xref.yml"
                ]
            },
            {
                // extensions project additional content, Includes the generated metadata API folder
                "files": [
                    "extensions/**.{md,yml}"
                ],
                // Exclude the namespace overwrites and XREF maps as they are listed explicitly elsewhere
                "exclude": [
                    "**/namespaces/**.md",
                    "**/*-xref.yml"
                ]
            },
            {
                // InteropHelpers project additional content, Includes the generated metadata API folder
                "files": [
                    "interop-helpers/**.{md,yml}"
                ],
                // Exclude the namespace overwrites and XREF maps as they are listed explicitly elsewhere
                "exclude": [
                    "**/namespaces/**.md",
                    "**/*-xref.yml"
                ]
            },
            {
                // Runtime Utils project additional content, Includes the generated metadata API folder
                // NOTE: File paths are relative to the location of this file
                "files": [
                    "runtime-utils/**.{md,yml}"
                ],
                // Exclude the namespace overwrites and XREF maps as they are listed explicitly elsewhere
                "exclude": [
                    "**/namespaces/**.md",
                    "**/*-xref.yml"
                ]
            },
            {
                // SrcGenerations project additional content, Includes the generated metadata API folder
                // NOTE: File paths are relative to the location of this file
                "files": [
                    "src-gen-test-utils/**.{md,yml}"
                ],
                // Exclude the namespace overwrites and XREF maps as they are listed explicitly elsewhere
                "exclude": [
                    "**/namespaces/**.md",
                    "**/*-xref.yml"
                ]
            },
            {
                // SrcGenerations project additional content, Includes the generated metadata API folder
                // NOTE: File paths are relative to the location of this file
                "files": [
                    "SrcGeneration/**.{md,yml}"
                ],
                // Exclude the namespace overwrites and XREF maps as they are listed explicitly elsewhere
                "exclude": [
                    "**/namespaces/**.md",
                    "**/*-xref.yml"
                ]
            }
        ],
        "resource": [
            {
                // General site resources
                "files": [
                    "favicon.ico",
                    "**.png",
                    "**.svg"
                ]
            }
        ],
        "overwrite": [
            {
                "files": [
                    "**/apidocs/**.md",
                    "**/namespaces/**.md"
                ]
            }
        ],
        "template": [
            "default",
            "modern",
            "templates/Ubiquity"
        ],
        "globalMetadataFiles": [],
        "fileMetadataFiles": [],
        "postProcessors": [],
        "globalMetadata": {
            "_appTitle": "Ubiquity.NET",
            "_appFooter": "Copyright (C) 2017-2025, Ubiquity.NET Contributors",
            "_appLogoPath": "favicon-32x32.png",
            "_disableBreadcrumb": true,
            "_gitContribute": {
                "repo": "https://github.com/UbiquityDotNET/Ubiquity.NET.Utils",
                "branch": "develop"
            },
            "_gitUrlPattern": "github"
        }
    }
}
